mode: rule
log-level: info
http:
  mitm:
    - "api-overmind.youdao.com"
  force-http-engine:
    - "*:80"
  url-rewrite:
    - https:\/\/fanyi\.youdao\.com\/indexLLM.html https://fanyi.youdao.com/index.html 302
  script:
    - match: https:\/\/api-overmind\.youdao\.com\/openapi\/get\/luna\/dict\/dict-common-config\/prod\/(translateMainPageBanner|translateMainPagePopup)
      name: you-dao-script
      type: response # request / response
      require-body: true
      timeout: 20
      argument: ""
      binary-mode: false
      max-size: 1048576 # 1MB

script-providers:
  you-dao-script:
    url: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/rewrite/script/js/youdao.js
    interval: 86400

hosts:
  "*.clash.dev": 127.0.0.1
  ".dev": 127.0.0.1
  "alpha.clash.dev": "::1"

dns:
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
    - system
  nameserver:
    # ä¸å»ºè®®é…ç½®è¶…è¿‡ 2 ä¸ª DNS æœåŠ¡å™¨ï¼Œä¼šå¢åŠ ç³»ç»ŸåŠŸè€—
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    - system

  # è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œè§£å†³éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜ https://help.nextdns.io/t/g9hdkjz
  skip-cert-verify: true

  # å¯¹éƒ¨åˆ†åŸŸåä½¿ç”¨å•ç‹¬çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    "www.baidu.com": 114.114.114.114
    "+.internal.crop.com": system

  # åœ¨ä»¥ä¸‹åˆ—è¡¨çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸º fake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  fake-ip-filter:
    # Stun Services
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - "+.stun.*.*.*.*.*"

    # Google Voices
    - "lens.l.google.com"

    # Nintendo Switch
    - "*.n.n.srv.nintendo.net"

    # PlayStation
    - "+.stun.playstation.net"

    # XBox
    - "xbox.*.*.microsoft.com"
    - "*.*.xboxlive.com"

    # Microsoft
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"

    # Bilibili CDN
    - "*.mcdn.bilivideo.cn"

proxies:

proxy-groups:
  - icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/Final.png
    name: å…¨çƒç­–ç•¥
    proxies:
      - è‡ªåŠ¨èŠ‚ç‚¹
      - æ‰‹åŠ¨èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - è‹±å›½èŠ‚ç‚¹
      - DIRECT
    type: select
  - filter: "ğŸ‡­ğŸ‡°|æ¸¯|HK|(?i)Hong"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/HK.png
    include-all: true
    interval: 2400
    lazy: true
    name: é¦™æ¸¯èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "å°|TW|(?i)Taiwan"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/CN.png
    include-all: true
    interval: 2400
    lazy: true
    name: å°æ¹¾èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|(?i)Japan"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/JP.png
    include-all: true
    interval: 2400
    lazy: true
    name: æ—¥æœ¬èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|(?i)Singapore"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/SG.png
    include-all: true
    interval: 2400
    lazy: true
    name: æ–°åŠ å¡èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡ºğŸ‡¸|ç¾å›½|ç¾åœ‹|US|æ´›æ‰çŸ¶|è¥¿é›…å›¾|(?i)States|American"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/US.png
    include-all: true
    interval: 2400
    lazy: true
    name: ç¾å›½èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡°ğŸ‡·|KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|(?i)Korea"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/KR.png
    include-all: true
    interval: 2400
    lazy: true
    name: éŸ©å›½èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡¬ğŸ‡§|è‹±|è‹±å›½|è‹±åœ‹|å¤§ä¸åˆ—é¢ åŠåŒ—çˆ±å°”å…°è”åˆç‹å›½|è”åˆç‹å›½|ä¼¦æ•¦|UK|(?i)Britain|United Kingdom"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/UK.png
    include-all: true
    interval: 2400
    lazy: true
    name: è‹±å›½èŠ‚ç‚¹
    tolerance: 50
    type: url-test

  - icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png
    include-all: true
    interval: 2400
    lazy: true
    name: è‡ªåŠ¨èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available.png
    include-all: true
    interval: 2400
    lazy: true
    name: æ‰‹åŠ¨èŠ‚ç‚¹
    type: select


# è¿™é‡Œæ˜¯è®¢é˜… è¯·æ¢ä¸Šè‡ªå·±çš„
proxy-providers:
  XiaoMao-Stash:
    interval: 4800
    url: XXXXXè®¢é˜…åœ°å€XXXXXXå¯ä½¿ç”¨substoreåœ°å€XXXXX

rule-providers:
  ShuntCorrection:
    behavior: classical
    url: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/filter/ShuntCorrection.yaml
    interval: 86400
  AdvertisingLite:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite_Classical.yaml
    interval: 86400

rules:
  - RULE-SET,ShuntCorrection,DIRECT
  - RULE-SET,AdvertisingLite,REJECT
  - GEOIP,CN,DIRECT
  - MATCH,å…¨çƒç­–ç•¥
