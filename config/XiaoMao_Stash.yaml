# Stash æ‡’äººé…ç½®XiaoMaoç‰ˆ - é€šç”¨å‹ ä¸­æ–‡ç‰ˆ ã€ä½œè€…ã€‘XiaoMao
# æœ€è¿‘æ›´æ–°æ—¶é—´ 202305015
# æ‡’äººç‰ˆæœ¬ @1.0

# âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ç‰ˆæœ¬è¯´æ˜ï¼Œè®°å¾—åŠ¡å¿…çœ‹å®Œâš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸

# å°ç‰ˆæœ¬æ›´æ–°è¯·æŸ¥çœ‹æ›´æ–°æ—¥å¿— ï½œ æˆ–åŠ å…¥xiaomaoç»„ç»‡â¬‡ï¸
# å¾®ä¿¡å…¬ä¼—å· ã€å°å¸½é›†å›¢ã€‘
# XiaoMao Â· Tgé¢‘é“é¢‘é“ï¼šhttps://t.me/xiaomaoJT
# XiaoMao Â· GitHubä»“åº“ï¼šhttps://github.com/xiaomaoJT/QxScript

# è§„åˆ™æ¨¡å¼ï¼šruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ directï¼ˆå…¨å±€ç›´è¿ï¼‰
mode: rule

# è®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ« (é»˜è®¤çº§åˆ«ï¼šsilentï¼Œå³ä¸è¾“å‡ºä»»ä½•å†…å®¹ï¼Œä»¥é¿å…å› æ—¥å¿—å†…å®¹è¿‡å¤§è€Œå¯¼è‡´ç¨‹åºå†…å­˜æº¢å‡ºï¼‰ã€‚
# 5 ä¸ªçº§åˆ«ï¼šsilent / info / warning / error / debugã€‚çº§åˆ«è¶Šé«˜æ—¥å¿—è¾“å‡ºé‡è¶Šå¤§ï¼Œè¶Šå€¾å‘äºè°ƒè¯•ï¼Œè‹¥éœ€è¦è¯·è‡ªè¡Œå¼€å¯ã€‚
log-level: info

# HTTP å¼•æ“ç›¸å…³
http:
  # å¼ºåˆ¶ä½¿ç”¨ HTTP å¼•æ“å¤„ç† TCP è¿æ¥
  # æ•è·åçš„è¿æ¥å¯ä»¥ä½¿ç”¨é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚é‡å†™å’Œè„šæœ¬
  force-http-engine:
    - "*:80"
    - "*:4480" # BiliBili CDN
    - "*:9102" # BiliBili CDN

  # ä»¥ PKCS #12 ç¼–ç çš„ CA è¯ä¹¦
  ca: ""
  # è¯ä¹¦å¯†ç 
  ca-passphrase: ""

# æ”¯æŒé€šé…ç¬¦åŸŸå (ä¾‹å¦‚: *.clash.dev, *.foo.*.example.com )
# ä¸ä½¿ç”¨é€šé…ç¬¦çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸå (ä¾‹å¦‚: foo.example.com > *.example.com > .example.com )
# æ³¨æ„: +.foo.com çš„æ•ˆæœç­‰åŒäº .foo.com å’Œ foo.com
hosts:
  "*.clash.dev": 127.0.0.1
  ".dev": 127.0.0.1
  "alpha.clash.dev": "::1"

# DNS æœåŠ¡å™¨é…ç½®
dns:
  # ä»¥ä¸‹å¡«å†™çš„ DNS æœåŠ¡å™¨å°†ä¼šè¢«ç”¨æ¥è§£æ DNS æœåŠ¡çš„åŸŸå
  # ä»…å¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
    - system # ä½¿ç”¨ iOS ç³»ç»Ÿ DNS
  # æ”¯æŒ UDP / TCP / DoT / DoH åè®®çš„ DNS æœåŠ¡ï¼Œå¯ä»¥æŒ‡æ˜å…·ä½“çš„è¿æ¥ç«¯å£å·ã€‚
  # æ‰€æœ‰ DNS è¯·æ±‚å°†ä¼šç›´æ¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ä»£ç†ã€‚
  # Stash ä¼šä½¿ç”¨æœ€å…ˆè·å¾—çš„è§£æè®°å½•å›å¤ DNS è¯·æ±‚
  nameserver:
    # ä¸å»ºè®®é…ç½®è¶…è¿‡ 2 ä¸ª DNS æœåŠ¡å™¨ï¼Œä¼šå¢åŠ ç³»ç»ŸåŠŸè€—
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
    # - quic://dns.adguard.com:853
    # - doq://test.dns.nextdns.io:853
    - system # ä½¿ç”¨ iOS ç³»ç»Ÿ DNS

  # è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œè§£å†³éƒ¨åˆ†å…¼å®¹æ€§é—®é¢˜ https://help.nextdns.io/t/g9hdkjz
  skip-cert-verify: true

  # å¯¹éƒ¨åˆ†åŸŸåä½¿ç”¨å•ç‹¬çš„ DNS æœåŠ¡å™¨
  nameserver-policy:
    "www.baidu.com": 114.114.114.114
    "+.internal.crop.com": system

  # åœ¨ä»¥ä¸‹åˆ—è¡¨çš„åŸŸåå°†ä¸ä¼šè¢«è§£æä¸º fake ipï¼Œè¿™äº›åŸŸåç›¸å…³çš„è§£æè¯·æ±‚å°†ä¼šè¿”å›å®ƒä»¬çœŸå®çš„ IP åœ°å€
  fake-ip-filter:
    # from: https://github.com/Kr328/ClashForAndroid/blob/ffa559a57102ed8bc20eba41aa236a7764741bf9/core/src/main/golang/native/config/defaults.go#L10

    # Stun Services
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - "+.stun.*.*.*.*.*"

    # Google Voices
    - "lens.l.google.com"

    # Nintendo Switch
    - "*.n.n.srv.nintendo.net"

    # PlayStation
    - "+.stun.playstation.net"

    # XBox
    - "xbox.*.*.microsoft.com"
    - "*.*.xboxlive.com"

    # Microsoft
    - "*.msftncsi.com"
    - "*.msftconnecttest.com"

    # Bilibili CDN
    - "*.mcdn.bilivideo.cn"

proxies:
  # shadowsocks
  # æ”¯æŒåŠ å¯†æ–¹å¼ï¼š
  #   aes-128-gcm aes-192-gcm aes-256-gcm
  #   aes-128-cfb aes-192-cfb aes-256-cfb
  #   aes-128-ctr aes-192-ctr aes-256-ctr
  #   rc4-md5 chacha20 chacha20-ietf xchacha20
  #   chacha20-ietf-poly1305 xchacha20-ietf-poly1305

  # vmess
  # æ”¯æŒåŠ å¯†æ–¹å¼ï¼šauto / aes-128-gcm / chacha20-poly1305 / none

  # socks5
  # http
  # snell
  # Trojan
  # hysteria https://github.com/HyNetwork/hysteria/wiki/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95

  # ShadowsocksR
  # æ”¯æŒçš„åŠ å¯†æ–¹å¼: SS ä¸­æ”¯æŒçš„æ‰€æœ‰æµåŠ å¯†æ–¹å¼
  # æ”¯æŒçš„æ··æ·†æ–¹å¼:
  #   plain http_simple http_post
  #   random_head tls1.2_ticket_auth tls1.2_ticket_fastauth
  # æ”¯æŒçš„åè®®:
  #   origin auth_sha1_v4 auth_aes128_md5
  #   auth_aes128_sha1 auth_chain_a auth_chain_b

proxy-groups:
  # relay ä»£ç†çš„è½¬å‘é“¾, åœ¨ proxies ä¸­ä¸åº”è¯¥åŒ…å« relay. ä¸æ”¯æŒ UDP.
  # æµé‡: clash <-> http <-> vmess <-> ss1 <-> ss2 <-> äº’è”ç½‘

  # url-test å¯ä»¥è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€çŸ­çš„æœåŠ¡å™¨
  # fallback å¯ä»¥å°½é‡æŒ‰ç…§ç”¨æˆ·ä¹¦å†™çš„æœåŠ¡å™¨é¡ºåºï¼Œåœ¨ç¡®ä¿æœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨é€‰æ‹©æœåŠ¡å™¨
  # load-balance å¯ä»¥ä½¿ç›¸åŒ eTLD è¯·æ±‚åœ¨åŒä¸€æ¡ä»£ç†çº¿è·¯ä¸Š
  # select ç”¨æ¥å…è®¸ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹© ä»£ç†æœåŠ¡å™¨ æˆ– æœåŠ¡å™¨ç»„
  # æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ RESTful API å»åˆ‡æ¢æœåŠ¡å™¨ï¼Œè¿™ç§æ–¹å¼æ¨èåœ¨ GUI ä¸­ä½¿ç”¨

  # åŸºäº SSID çš„ç­–ç•¥ï¼Œæ–¹ä¾¿åœ¨ç‰¹æ®Šç½‘ç»œç¯å¢ƒä¸‹ä½¿ç”¨ç‰¹å®šçš„ä»£ç†
  # - name: ssid-group
  #   type: select # ç±»å‹å¿…é¡»ä¸º selectï¼Œå…¼å®¹åŸç‰ˆ clash é…ç½®
  #   proxies:
  #     - ss1
  #     - ss2
  #     - DIRECT
  #   ssid-policy:
  #     # åœ¨ SSID ä¸º office çš„ Wi-Fi ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss1 ç­–ç•¥
  #     # åœ¨ SSID ä¸º home çš„ Wi-Fi ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss2 ç­–ç•¥
  #     # åœ¨èœ‚çªæ•°æ®ä¸­è‡ªåŠ¨åˆ‡æ¢ä¸º ss3 ç­–ç•¥
  #     # å…¶ä»–çš„ SSID é»˜è®¤ä¸º DIRECT
  #     office: ss1
  #     home: ss2
  #     cellular: ss3
  #     default: DIRECT

  - icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/Final.png
    name: å…¨çƒç­–ç•¥
    proxies:
      - è‡ªåŠ¨èŠ‚ç‚¹
      - æ‰‹åŠ¨èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - è‹±å›½èŠ‚ç‚¹
      - DIRECT
    type: select
  - icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/Spotify.png
    name: SpotifyæœåŠ¡
    proxies:
      - è‡ªåŠ¨èŠ‚ç‚¹
      - æ‰‹åŠ¨èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - è‹±å›½èŠ‚ç‚¹
      - DIRECT
    type: select
  - icon: https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Social_Media/Delicious.png
    name: BingæœåŠ¡
    proxies:
      - è‡ªåŠ¨èŠ‚ç‚¹
      - æ‰‹åŠ¨èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - è‹±å›½èŠ‚ç‚¹
      - DIRECT
    type: select
  - icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/Microsoft.png
    name: å¾®è½¯æœåŠ¡
    proxies:
      - è‡ªåŠ¨èŠ‚ç‚¹
      - æ‰‹åŠ¨èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - è‹±å›½èŠ‚ç‚¹
      - DIRECT
    type: select
  - icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/Google_Search.png
    name: è°·æ­ŒæœåŠ¡
    proxies:
      - è‡ªåŠ¨èŠ‚ç‚¹
      - æ‰‹åŠ¨èŠ‚ç‚¹
      - é¦™æ¸¯èŠ‚ç‚¹
      - å°æ¹¾èŠ‚ç‚¹
      - æ—¥æœ¬èŠ‚ç‚¹
      - æ–°åŠ å¡èŠ‚ç‚¹
      - ç¾å›½èŠ‚ç‚¹
      - éŸ©å›½èŠ‚ç‚¹
      - è‹±å›½èŠ‚ç‚¹
    type: select

  - filter: "ğŸ‡­ğŸ‡°|æ¸¯|HK|(?i)Hong"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/HK.png
    include-all: true
    interval: 2400
    lazy: true
    name: é¦™æ¸¯èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "å°|TW|(?i)Taiwan"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/CN.png
    include-all: true
    interval: 2400
    lazy: true
    name: å°æ¹¾èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|JP|(?i)Japan"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/JP.png
    include-all: true
    interval: 2400
    lazy: true
    name: æ—¥æœ¬èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|SG|(?i)Singapore"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/SG.png
    include-all: true
    interval: 2400
    lazy: true
    name: æ–°åŠ å¡èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡ºğŸ‡¸|ç¾å›½|ç¾åœ‹|US|æ´›æ‰çŸ¶|è¥¿é›…å›¾|(?i)States|American"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/US.png
    include-all: true
    interval: 2400
    lazy: true
    name: ç¾å›½èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡°ğŸ‡·|KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|(?i)Korea"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/KR.png
    include-all: true
    interval: 2400
    lazy: true
    name: éŸ©å›½èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - filter: "ğŸ‡¬ğŸ‡§|è‹±|è‹±å›½|è‹±åœ‹|å¤§ä¸åˆ—é¢ åŠåŒ—çˆ±å°”å…°è”åˆç‹å›½|è”åˆç‹å›½|ä¼¦æ•¦|UK|(?i)Britain|United Kingdom"
    icon: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/lazy/icon/city/u/UK.png
    include-all: true
    interval: 2400
    lazy: true
    name: è‹±å›½èŠ‚ç‚¹
    tolerance: 50
    type: url-test

  - icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png
    include-all: true
    interval: 2400
    lazy: true
    name: è‡ªåŠ¨èŠ‚ç‚¹
    tolerance: 50
    type: url-test
  - icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Available.png
    include-all: true
    interval: 2400
    lazy: true
    name: æ‰‹åŠ¨èŠ‚ç‚¹
    type: select

proxy-providers:
  XiaoMaoæ°¸ä¹…è®¢é˜…:
    interval: 4800
    url: https://gist.githubusercontent.com/xiaomaoJT/921025f761277153bebb30abde7f784f/raw/XiaoMao-FE-Clash

rule-providers:
  # domain
  # domain-text æ¨è
  # ipcidr
  # ipcidr-text
  # classical
  ShuntCorrection:
    behavior: classical
    url: https://raw.githubusercontent.com/xiaomaoJT/QxScript/main/filter/ShuntCorrection.yaml
    interval: 86400
  Direct:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.yaml
    interval: 86400
  AdvertisingLite:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite_Classical.yaml
    interval: 86400
  Hijacking:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Hijacking/Hijacking.yaml
    interval: 86400
  Privacy:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Classical.yaml
    interval: 86400
  Microsoft:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml
    interval: 86400
  Spotify:
    type: "http"
    behavior: "classical"
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml"
    interval: 86400
  Bing:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.yaml
    interval: 86400
  Google:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    interval: 86400
  Streaming:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia_Classical.yaml
    interval: 86400
  Global:
    behavior: classical
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml
    interval: 86400

rules:
  - RULE-SET,ShuntCorrection,DIRECT
  - RULE-SET,Direct,DIRECT
  - RULE-SET,AdvertisingLite,REJECT
  - RULE-SET,Hijacking,REJECT
  - RULE-SET,Privacy,REJECT
  - RULE-SET,Spotify,SpotifyæœåŠ¡
  - RULE-SET,Microsoft,BingæœåŠ¡
  - RULE-SET,Microsoft,å¾®è½¯æœåŠ¡
  - RULE-SET,Google,è°·æ­ŒæœåŠ¡
  - RULE-SET,Streaming,å…¨çƒç­–ç•¥
  - RULE-SET,Global,å…¨çƒç­–ç•¥
  - GEOIP,CN,DIRECT
  - MATCH,å…¨çƒç­–ç•¥
